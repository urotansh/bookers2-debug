<% if users.exists? %>
  <table class='table'>
    <thead>
      <tr>
        <th>image</th>
        <th>name</th>
        <th>follows</th>
        <th>followers</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% users.each do |user| %>
        <tr>
          <td>
            <%= image_tag user.get_profile_image, size: '50x50' %>
          </td>
          <td>
            <%= user.name %>
          </td>
          <td>
            フォロー数:<%= user.followings.count %>
          </td>
          <td>
            フォロワー数:<%= user.followers.count %>
          </td>
          <td>
            <%# ログインユーザと一致する行はフォロー/フォロー解除ボタン非表示  %>
            <% if user != current_user %>
              <% if user.followed_by?(current_user) %>
                <%= link_to "フォロー外す", user_relationships_path(user.id), method: :delete, class: 'btn btn-info' %>
              <% else %>
                <%= link_to "フォローする", user_relationships_path(user.id), method: :post, class: 'btn btn-success' %>
              <% end %>
            <% end %>
          </td>
          <td>
            <%= link_to 'Show', user %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>ユーザはいません</p>
<% end %>
